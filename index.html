<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Important Question üò≥</title>
  <style>
    :root{
      --bg1:#0b1020;
      --bg2:#151b3a;
      --card:#0f1730cc;
      --card2:#0c1328ee;
      --text:#f7f7ff;
      --muted:#c8d0ffcc;
      --accent:#ff5ca8;
      --accent2:#6be3ff;
      --good:#57ff9a;
      --bad:#ff6b6b;
      --shadow: 0 18px 60px rgba(0,0,0,.35);
      --radius: 22px;
      --btnRadius: 14px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--font);
      color:var(--text);
      background: radial-gradient(1200px 800px at 20% 15%, #2c3d7b 0%, var(--bg1) 45%, #060914 100%);
      overflow:hidden;
      height:100vh;
    }

    /* Background layers */
    .scene{
      position:fixed; inset:0;
      background:
        radial-gradient(900px 600px at 75% 20%, rgba(255,92,168,.22) 0%, rgba(255,92,168,0) 60%),
        radial-gradient(850px 600px at 20% 80%, rgba(107,227,255,.18) 0%, rgba(107,227,255,0) 60%),
        linear-gradient(180deg, var(--bg1) 0%, var(--bg2) 55%, var(--bg1) 100%);
      opacity:.95;
      transition: opacity .7s ease, filter .7s ease;
      filter:saturate(1.08);
    }

    /* optional scenic GIF background on stage 3 */
    #sceneryGifBg{
      position:fixed; inset:0;
      width:100%; height:100%;
      object-fit:cover;
      opacity:0;
      transition: opacity 1s ease;
      pointer-events:none;
      filter: brightness(.8) saturate(1.15);
    }

    /* Stars */
    .stars{
      position:fixed; inset:0;
      background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,.8) 40%, transparent 42%),
        radial-gradient(1.5px 1.5px at 70% 20%, rgba(255,255,255,.7) 40%, transparent 42%),
        radial-gradient(1.5px 1.5px at 40% 80%, rgba(255,255,255,.6) 40%, transparent 42%),
        radial-gradient(1px 1px at 80% 70%, rgba(255,255,255,.6) 40%, transparent 42%),
        radial-gradient(1px 1px at 10% 60%, rgba(255,255,255,.55) 40%, transparent 42%);
      opacity:.55;
      mix-blend-mode:screen;
      animation: twinkle 5s ease-in-out infinite alternate;
      pointer-events:none;
    }
    @keyframes twinkle { from{opacity:.35} to{opacity:.7} }

    /* Petals (pleasant vibe) */
    .petals{
      position:fixed; inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity 1s ease;
      overflow:hidden;
    }
    .petal{
      position:absolute;
      width:10px; height:10px;
      background: rgba(255, 205, 230, .9);
      border-radius: 10px 2px 10px 2px;
      filter: drop-shadow(0 10px 15px rgba(255,92,168,.12));
      animation: petalFall linear forwards;
      transform: rotate(20deg);
    }
    @keyframes petalFall{
      from{ transform: translateY(-10vh) translateX(0) rotate(20deg); opacity:0; }
      10%{opacity:1;}
      to{ transform: translateY(110vh) translateX(12vw) rotate(280deg); opacity:0; }
    }

    /* Layout */
    .wrap{
      position:relative;
      height:100vh;
      display:grid;
      place-items:center;
      padding:22px;
    }
    .card{
      width:min(820px, 94vw);
      background: linear-gradient(180deg, rgba(15,23,48,.78), rgba(12,19,40,.90));
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 18px 18px 16px;
      backdrop-filter: blur(10px);
      position:relative;
      overflow:hidden;
    }

    /* Top bar */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
      margin-bottom:10px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 999px;
      color: var(--muted);
      font-size: 13px;
      user-select:none;
    }
    .names{ color:#fff; font-weight:800; }

    .meterWrap{
      display:flex;
      align-items:center;
      gap:10px;
      padding:8px 12px;
      background: rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      border-radius: 999px;
      min-width: 260px;
    }
    .meterLabel{ font-size:12px; color:rgba(255,255,255,.78); font-weight:750; }
    .meter{
      height:10px;
      flex:1;
      border-radius:999px;
      background: rgba(255,255,255,.10);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .meterFill{
      height:100%;
      width: 8%;
      border-radius:999px;
      background: linear-gradient(90deg, var(--accent), var(--accent2));
      transition: width .35s ease;
    }

    h1{
      margin: 10px 0 6px;
      font-size: clamp(22px, 3vw, 40px);
      line-height:1.06;
      letter-spacing:-.4px;
    }
    p{
      margin: 8px 0 0;
      color: var(--muted);
      font-size: clamp(14px, 1.6vw, 16px);
      line-height:1.45;
    }

    .btnRow{
      margin-top: 14px;
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      justify-content:flex-start;
      position:relative;
      min-height:64px;
    }
    button{
      border:0;
      padding: 12px 16px;
      border-radius: var(--btnRadius);
      font-weight: 800;
      cursor:pointer;
      color: #0b1020;
      background: #ffffff;
      box-shadow: 0 14px 40px rgba(0,0,0,.28);
      transition: transform .12s ease, filter .12s ease, opacity .2s ease;
      user-select:none;
      touch-action:manipulation;
      white-space:nowrap;
    }
    button:active{ transform: translateY(1px) scale(.99); }
    button:hover{ filter: brightness(1.02); transform: translateY(-1px); }
    .primary{ background: linear-gradient(90deg, var(--accent), #ff83c2); color:#12071a; }
    .secondary{ background: linear-gradient(90deg, var(--accent2), #b8f3ff); color:#081a22; }
    .danger{ background: linear-gradient(90deg, #ff6b6b, #ffa0a0); color:#240a0a; }
    .ghost{
      background: rgba(255,255,255,.10);
      color: #fff;
      border:1px solid rgba(255,255,255,.18);
      box-shadow:none;
    }

    /* Screens + transitions */
    .screen{ display:none; }
    .screen.active{ display:block; animation: popIn .35s ease; }
    @keyframes popIn{
      from{ transform: translateY(10px) scale(.985); opacity:0; }
      to{ transform: translateY(0) scale(1); opacity:1; }
    }

    /* Play area for runaway buttons */
    .playArea{
      position:relative;
      margin-top: 14px;
      border-radius: 18px;
      border: 1px dashed rgba(255,255,255,.18);
      background: rgba(255,255,255,.04);
      height: 220px;
      overflow:hidden;
    }
    .playHint{
      position:absolute;
      left:14px; top:14px;
      font-size: 12px;
      color: rgba(255,255,255,.62);
      user-select:none;
      z-index:2;
    }
    #noRun, .noDecoy{
      position:absolute;
      transform: translate(-50%,-50%);
    }
    .noDecoy{
      opacity:.92;
      filter: saturate(1.1);
    }

    /* GIF cards */
    .gifCard{
      margin-top: 14px;
      display:flex;
      gap:14px;
      align-items:center;
      padding: 14px;
      border-radius: 18px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
    }
    .gifBox{
      width: 170px;
      height: 120px;
      border-radius: 16px;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(0,0,0,.18);
      flex: 0 0 auto;
      display:grid;
      place-items:center;
    }
    .gifBox img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
    }
    .gifText{ flex:1; min-width: 220px; }
    .gifTitle{ font-weight: 900; margin: 0 0 4px; font-size: 16px; }
    .gifSub{ margin:0; color: rgba(255,255,255,.76); font-size: 13.5px; line-height:1.3; }

    /* Toast */
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform: translateX(-50%);
      background: rgba(0,0,0,.55);
      border: 1px solid rgba(255,255,255,.14);
      color:#fff;
      padding: 10px 14px;
      border-radius: 999px;
      backdrop-filter: blur(8px);
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .25s ease;
      font-weight:750;
      font-size: 13px;
      max-width: min(92vw, 760px);
      text-align:center;
      z-index:99;
    }
    .toast.show{
      opacity:1;
      transform: translateX(-50%) translateY(-6px);
    }

    /* Hearts (fun) */
    .hearts{
      pointer-events:none;
      position:fixed; inset:0;
      overflow:hidden;
      opacity:0;
      transition: opacity 1s ease;
    }
    .heart{
      position:absolute;
      width:16px; height:16px;
      transform: rotate(45deg);
      background: rgba(255,92,168,.9);
      filter: drop-shadow(0 10px 18px rgba(255,92,168,.18));
      animation: floatUp linear forwards;
      border-radius: 4px;
    }
    .heart::before, .heart::after{
      content:"";
      position:absolute;
      width:16px; height:16px;
      background: inherit;
      border-radius: 50%;
    }
    .heart::before{ left:-8px; top:0; }
    .heart::after{ top:-8px; left:0; }
    @keyframes floatUp{
      from{ transform: translateY(20px) rotate(45deg); opacity:0; }
      10%{ opacity:1; }
      to{ transform: translateY(-120vh) rotate(45deg); opacity:0; }
    }

    /* Confetti */
    .confetti{
      pointer-events:none;
      position:fixed; inset:0;
      overflow:hidden;
      display:none;
      z-index:80;
    }
    .confetti.show{ display:block; }
    .confetti i{
      position:absolute;
      width:10px; height:16px;
      opacity:.95;
      animation: fall linear forwards;
      border-radius: 3px;
    }
    @keyframes fall{
      from{ transform: translateY(-10vh) rotate(0deg); opacity:1; }
      to{ transform: translateY(110vh) rotate(420deg); opacity:0.9; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation:none!important; transition:none!important; }
      body{ overflow:auto; }
    }
  </style>
</head>
<body>
  <img id="sceneryGifBg" src="assets/scenery.gif" alt="scenery background"/>

  <div class="scene" id="scene"></div>
  <div class="stars"></div>
  <div class="petals" id="petals"></div>
  <div class="hearts" id="hearts"></div>
  <div class="confetti" id="confetti"></div>
  <div class="toast" id="toast"></div>

  <div class="wrap">
    <div class="card">

      <div class="topbar">
        <div class="badge">üíå Mini Love App ‚Ä¢ for <span class="names" id="toName">your crush</span></div>
        <div class="meterWrap">
          <div class="meterLabel">Love Meter</div>
          <div class="meter"><div class="meterFill" id="meterFill"></div></div>
        </div>
      </div>

      <!-- SCREEN 1 -->
      <div class="screen active" id="screen1">
        <h1>Okay <span class="names" id="toName2">you</span>‚Ä¶ be honest üò≥<br/>Do you love <span class="names" id="fromName">me</span>?</h1>
        <p>Choose wisely. The universe is watching. Also, my ego is fragile.</p>

        <div class="gifCard">
          <div class="gifBox">
            <img src="assets/couple.gif" alt="cute couple gif" onerror="this.style.display='none'"/>
            <div style="padding:10px; text-align:center; color:rgba(255,255,255,.75); font-weight:800;">
              (drop a GIF in assets/couple.gif)
            </div>
          </div>
          <div class="gifText">
            <div class="gifTitle">Warm-up cuteness ü•π</div>
            <p class="gifSub">This app is 80% romance, 20% chaos, 200% you being adorable.</p>
          </div>
        </div>

        <div class="playArea" id="playArea">
          <div class="playHint">Try clicking ‚ÄúNo‚Äù üòà (it might‚Ä¶ run)</div>
          <button class="primary" id="yes1">Yes üíñ</button>
          <button class="danger" id="noRun">No üôÑ</button>
        </div>

        <p style="margin-top:12px;">Tip: If ‚ÄúNo‚Äù keeps escaping‚Ä¶ it‚Äôs not you. It‚Äôs the button‚Äôs commitment issues.</p>
      </div>

      <!-- SCREEN 2 -->
      <div class="screen" id="screen2">
        <h1>Wait wait wait‚Ä¶ üßê</h1>

        <div class="gifCard">
          <div class="gifBox">
            <img src="assets/sure.gif" alt="are you sure gif" onerror="this.style.display='none'"/>
            <div style="padding:10px; text-align:center; color:rgba(255,255,255,.75); font-weight:800;">
              (drop a GIF in assets/sure.gif)
            </div>
          </div>
          <div class="gifText">
            <div class="gifTitle">‚ÄúARE YOU SURE?‚Äù</div>
            <p class="gifSub">Because once you click‚Ä¶ my heart will do backflips. With permission.</p>
          </div>
        </div>

        <div class="btnRow">
          <button class="primary" id="yes2">Yes ‚úÖ</button>
          <button class="ghost" id="no2">No üö™</button>
        </div>

        <p>Warning: the ‚ÄúYes‚Äù button may have‚Ä¶ trust issues.</p>
      </div>

      <!-- SCREEN 3 -->
      <div class="screen" id="screen3">
        <h1>Okay‚Ä¶ romance mode activated üå∏</h1>
        <p>Enjoy the scenery while I gather courage for the final question‚Ä¶</p>

        <div class="gifCard">
          <div class="gifBox">
            <img src="assets/cat.gif" alt="funny cat gif" onerror="this.style.display='none'"/>
            <div style="padding:10px; text-align:center; color:rgba(255,255,255,.75); font-weight:800;">
              (drop your cat GIF in assets/cat.gif)
            </div>
          </div>
          <div class="gifText">
            <div class="gifTitle">Cat security system üòºüíò</div>
            <p class="gifSub">Preferably a silly ‚Äúlove blaster / toy‚Äù vibe. The cat takes romance VERY seriously.</p>
          </div>
        </div>

        <h1 style="margin-top:14px;">Will you marry <span class="names" id="fromName2">me</span>? üíç</h1>
        <p>(No pressure. Except yes pressure. Romantic pressure. Like a Disney soundtrack.)</p>

        <div class="btnRow">
          <button class="primary" id="yes3">Yes üò≠üíñ</button>
          <button class="secondary" id="yes4">Absolutely yes üî•</button>
        </div>

        <p style="margin-top:10px;">There is no ‚ÄúNo‚Äù. The button resigned.</p>
      </div>

      <!-- SCREEN 4 -->
      <div class="screen" id="screen4">
        <h1>LET‚ÄôS GOOOOOO üéâüíû</h1>
        <p><span class="names" id="toName3">You</span> just made <span class="names" id="fromName3">me</span> the happiest human alive.</p>

        <div class="gifCard">
          <div class="gifBox">
            <img src="assets/celebrate.gif" alt="celebration gif" onerror="this.style.display='none'"/>
            <div style="padding:10px; text-align:center; color:rgba(255,255,255,.75); font-weight:800;">
              (drop a GIF in assets/celebrate.gif)
            </div>
          </div>
          <div class="gifText">
            <div class="gifTitle">Certified official ü•≥</div>
            <p class="gifSub">Now you must accept your new role: CEO of my heart.</p>
          </div>
        </div>

        <div class="btnRow">
          <button class="primary" id="copyMsg">Copy a cute message üíå</button>
          <button class="ghost" id="replay">Replay üòà</button>
        </div>

        <p style="margin-top:10px; font-size:13px;">
          Pro tip: screenshot this page and send it back like ‚Äúwell‚Ä¶ you said yes.‚Äù üòå
        </p>
      </div>

    </div>
  </div>

  <script>
    // ======= Names via URL =======
    // index.html?to=Sara&from=Mateus
    const qs = new URLSearchParams(location.search);
    const to = qs.get("to") || "you";
    const from = qs.get("from") || "me";
    const setText = (id, text) => { const el = document.getElementById(id); if(el) el.textContent = text; };
    setText("toName", to); setText("toName2", to); setText("toName3", to);
    setText("fromName", from); setText("fromName2", from); setText("fromName3", from);

    // ======= Screen switcher =======
    const screens = ["screen1","screen2","screen3","screen4"].map(id => document.getElementById(id));
    const show = (id) => screens.forEach(s => s.classList.toggle("active", s.id === id));

    // ======= Toast =======
    const toastEl = document.getElementById("toast");
    let toastTimer = null;
    const toast = (msg) => {
      toastEl.textContent = msg;
      toastEl.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>toastEl.classList.remove("show"), 1900);
    };

    // ======= Love meter =======
    const meterFill = document.getElementById("meterFill");
    let love = 8; // percent
    const setLove = (v) => {
      love = Math.max(0, Math.min(100, v));
      meterFill.style.width = love + "%";
    };
    const addLove = (delta) => setLove(love + delta);

    // ======= Hearts =======
    const hearts = document.getElementById("hearts");
    const spawnHeart = () => {
      const h = document.createElement("div");
      h.className = "heart";
      const left = Math.random() * 100;
      const dur = 3.5 + Math.random()*4.5;
      const size = 10 + Math.random()*18;
      h.style.left = left + "vw";
      h.style.bottom = "-20px";
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.animationDuration = dur + "s";
      h.style.opacity = (0.55 + Math.random()*0.45).toFixed(2);
      hearts.appendChild(h);
      setTimeout(()=>h.remove(), dur*1000 + 200);
    };
    let heartLoop = null;
    const startHearts = () => {
      hearts.style.opacity = 1;
      if(heartLoop) return;
      heartLoop = setInterval(spawnHeart, 170);
    };

    // ======= Petals =======
    const petals = document.getElementById("petals");
    let petalLoop = null;
    const spawnPetal = () => {
      const p = document.createElement("div");
      p.className = "petal";
      p.style.left = (Math.random()*100) + "vw";
      const dur = 5 + Math.random()*5;
      p.style.animationDuration = dur + "s";
      p.style.opacity = (0.5 + Math.random()*0.5).toFixed(2);
      petals.appendChild(p);
      setTimeout(()=>p.remove(), dur*1000 + 200);
    };
    const startPetals = () => {
      petals.style.opacity = 1;
      if(petalLoop) return;
      petalLoop = setInterval(spawnPetal, 140);
    };

    // ======= Confetti =======
    const confetti = document.getElementById("confetti");
    const makeConfetti = () => {
      confetti.innerHTML = "";
      confetti.classList.add("show");
      const colors = ["#ff5ca8","#6be3ff","#57ff9a","#ffffff","#ffd36b","#b388ff"];
      for(let i=0;i<120;i++){
        const c = document.createElement("i");
        const left = Math.random()*100;
        const dur = 2.2 + Math.random()*2.8;
        const delay = Math.random()*0.9;
        const w = 6 + Math.random()*8;
        const h = 10 + Math.random()*14;
        c.style.left = left + "vw";
        c.style.animationDuration = dur + "s";
        c.style.animationDelay = delay + "s";
        c.style.width = w + "px";
        c.style.height = h + "px";
        c.style.background = colors[Math.floor(Math.random()*colors.length)];
        confetti.appendChild(c);
        setTimeout(()=>c.remove(), (dur+delay)*1000 + 350);
      }
      setTimeout(()=>confetti.classList.remove("show"), 3800);
    };

    // ======= Stage visuals =======
    const scene = document.getElementById("scene");
    const sceneryGifBg = document.getElementById("sceneryGifBg");

    function enterRomanceMode(){
      // scenic GIF background
      sceneryGifBg.style.opacity = 0.55;   // if scenery.gif exists
      scene.style.opacity = 0.78;
      scene.style.filter = "saturate(1.3) brightness(1.05)";
      startHearts();
      startPetals();
      addLove(30);
    }

    // ======= Screen 1: Runaway NO =======
    const playArea = document.getElementById("playArea");
    const yes1 = document.getElementById("yes1");
    const noRun = document.getElementById("noRun");

    // place buttons nicely on load
    function placeInitial(){
      const area = playArea.getBoundingClientRect();
      // Yes fixed
      yes1.style.position = "absolute";
      yes1.style.left = "18%";
      yes1.style.top  = "60%";
      yes1.style.transform = "translate(-50%,-50%)";
      // No default
      noRun.style.left = "70%";
      noRun.style.top  = "60%";
    }
    requestAnimationFrame(placeInitial);

    let dodges = 0;
    const maxDodges = 7;
    let decoysSpawned = false;

    const randBetween = (min,max)=> Math.random()*(max-min)+min;

    function moveButton(btn){
      const area = playArea.getBoundingClientRect();
      const b = btn.getBoundingClientRect();
      const pad = 12;
      const maxX = area.width - b.width - pad;
      const maxY = area.height - b.height - pad;
      const x = randBetween(pad, Math.max(pad, maxX));
      const y = randBetween(pad+34, Math.max(pad+34, maxY));
      btn.style.left = x + "px";
      btn.style.top = y + "px";
    }

    function spawnDecoyNos(){
      if(decoysSpawned) return;
      decoysSpawned = true;
      toast("OH NO‚Ä¶ decoy NOs appeared üíÄüòÇ");
      addLove(10);

      for(let i=0;i<2;i++){
        const d = document.createElement("button");
        d.className = "danger noDecoy";
        d.textContent = "No üôÉ";
        d.style.left = (40 + i*15) + "%";
        d.style.top = (35 + i*20) + "%";
        playArea.appendChild(d);

        const dodge = () => {
          moveButton(d);
          toast("Decoy NO: *evil laugh* üòà");
          addLove(2);
        };
        d.addEventListener("mouseenter", dodge);
        d.addEventListener("touchstart", (e)=>{ e.preventDefault(); dodge(); }, {passive:false});
        d.addEventListener("click", ()=>{
          toast("You clicked a FAKE no üíÄ");
          addLove(5);
          d.remove();
        });
      }
    }

    function dodgeLogic(){
      if(dodges >= maxDodges){
        noRun.textContent = "No (fine‚Ä¶ click) üò§";
        toast("No button got tired. Go ahead üòÇ");
        noRun.removeEventListener("mouseenter", dodgeLogic);
        noRun.removeEventListener("touchstart", touchDodge, {passive:false});
        spawnDecoyNos(); // last chaos
        return;
      }
      dodges++;
      moveButton(noRun);
      addLove(4);
      const lines = [
        "Too slow üèÉüí®",
        "Chase meeeee üòÇ",
        "Almost üò≠",
        "This is cardio now üí™",
        "NO has commitment issues üòà",
        "Okay okay relax üò§",
        "Fine‚Ä¶ you win üòµ"
      ];
      toast(lines[Math.min(dodges-1, lines.length-1)]);
      if(dodges === 4) spawnDecoyNos();
    }

    function touchDodge(e){ e.preventDefault(); dodgeLogic(); }

    noRun.addEventListener("mouseenter", dodgeLogic);
    noRun.addEventListener("touchstart", touchDodge, {passive:false});

    yes1.addEventListener("click", () => {
      toast("W choice üíñ");
      addLove(25);
      show("screen3");
      enterRomanceMode();
    });

    noRun.addEventListener("click", () => {
      toast("You clicked NO‚Ä¶ suspicious üò§");
      addLove(12);
      show("screen2");
    });

    // ======= Screen 2: Yes turns into No =======
    const yes2 = document.getElementById("yes2");
    const no2 = document.getElementById("no2");
    let flip = 0;

    function flipYes(){
      flip++;
      if(flip % 2 === 1){
        yes2.textContent = "No üò≠";
        yes2.classList.remove("primary");
        yes2.classList.add("danger");
        toast("HAHA it turned into NO üòÇ");
      }else{
        yes2.textContent = "Yes ‚úÖ";
        yes2.classList.remove("danger");
        yes2.classList.add("primary");
        toast("Okay it‚Äôs YES again‚Ä¶ for now üòá");
      }
      addLove(6);
    }

    yes2.addEventListener("mouseenter", flipYes);
    yes2.addEventListener("focus", flipYes);
    yes2.addEventListener("touchstart", ()=>flipYes(), {passive:true});

    yes2.addEventListener("click", () => {
      toast("Caught you hesitating üòè");
      addLove(20);
      show("screen3");
      enterRomanceMode();
    });

    no2.addEventListener("click", () => {
      toast("‚ÄòNo‚Äô?? that‚Äôs illegal here üöìüíò");
      addLove(18);
      show("screen3");
      enterRomanceMode();
    });

    // ======= Screen 3 -> Screen 4 =======
    const yes3 = document.getElementById("yes3");
    const yes4 = document.getElementById("yes4");

    function finish(){
      makeConfetti();
      toast("WE DID IT üéâüíû");
      setLove(100);
      show("screen4");
    }
    yes3.addEventListener("click", finish);
    yes4.addEventListener("click", finish);

    // ======= Screen 4 actions =======
    const copyMsg = document.getElementById("copyMsg");
    const replay = document.getElementById("replay");

    copyMsg.addEventListener("click", async () => {
      const msg = `Okay ${to}‚Ä¶ you clicked YES üòåüíñ\nSo‚Ä¶ when are we going on our first date? üò≥‚ú®`;
      try{
        await navigator.clipboard.writeText(msg);
        toast("Copied üíå Now send it like a villain üòà");
      }catch{
        toast("Copy blocked üò≠ Just screenshot this page!");
      }
    });

    replay.addEventListener("click", () => {
      dodges = 0;
      decoysSpawned = false;
      // remove decoys
      document.querySelectorAll(".noDecoy").forEach(x=>x.remove());
      noRun.textContent = "No üôÑ";
      noRun.addEventListener("mouseenter", dodgeLogic);
      noRun.addEventListener("touchstart", touchDodge, {passive:false});
      requestAnimationFrame(placeInitial);
      toast("Resetting the chaos üòà");
      setLove(8);
      sceneryGifBg.style.opacity = 0;
      petals.style.opacity = 0;
      hearts.style.opacity = 0;
      scene.style.opacity = 0.95;
      scene.style.filter = "saturate(1.08)";
      show("screen1");
    });

    // Preload GIFs to reduce flicker
    ["assets/cat.gif","assets/sure.gif","assets/couple.gif","assets/scenery.gif","assets/celebrate.gif"]
      .forEach(src => { const img = new Image(); img.src = src; });
  </script>
</body>
</html>
